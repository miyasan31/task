<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>{{ user?.userName }}のプロフィール</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-toolbar>
    <ion-segment [(ngModel)]="scene" (ionChange)="onSegmentChanged($event)">
      <ion-segment-button value="profile">
        <ion-label style="padding: 0 1rem">プロフィール</ion-label>
      </ion-segment-button>
      <ion-segment-button value="task">
        <ion-label style="padding: 0 1rem"> タスク </ion-label>
      </ion-segment-button>
      <ion-segment-button value="like">
        <ion-label style="padding: 0 1rem"> いいね </ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>

  <div [ngSwitch]="scene">
    <div *ngSwitchCase="'profile'" class="component-profile">
      <div class="user-info">
        <img
          class="user-avatar"
          src="{{ user.avatar }}"
          alt="{{ user.userName }}のユーザーアバター"
        />

        <div class="user-status">
          <div class="user-status-item">
            <p class="count-text">20</p>
            <p class="count-label">連続コミット</p>
          </div>
          <div class="user-status-item">
            <p class="count-text">{{ isDoneTaskCount }}</p>
            <p class="count-label">タスク完了</p>
          </div>
          <div class="user-status-item">
            <p class="count-text">{{ likeCount }}</p>
            <p class="count-label">貰ったいいね</p>
          </div>
        </div>
      </div>

      <p class="user-name">{{ user.userName }}</p>

      <p class="profile-body">{{ user.profile || 'プロフィール文が未入力です。' }}</p>

      <app-calendar-heatmap></app-calendar-heatmap>

      <ion-button (click)="onSignOut()">サインアウト</ion-button>
    </div>

    <div *ngSwitchCase="'task'">
      <app-task-detail-card
        *ngFor="let task of taskList | async; trackBy: trackByFn"
        [user]="user"
        [task]="task"
      ></app-task-detail-card>
    </div>

    <div *ngSwitchCase="'like'">
      <app-task-detail-card
        *ngFor="let like of likeList | async; trackBy: trackByFn"
        [user]="like.user"
        [task]="{ like: like.like, task: like.task }"
      ></app-task-detail-card>
    </div>
  </div>
</ion-content>
